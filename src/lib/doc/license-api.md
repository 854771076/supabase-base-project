# License Verification API Documentation

This document describes how to verify license keys generated by our system.

## API Endpoint

**Endpoint**: `GET /api/v1/licenses/verify`

### Parameters

| Name | Type | Required | Description |
| :--- | :--- | :--- | :--- |
| `key` | `string` | Yes | The license key to verify (Format: `XXXX-XXXX-XXXX-XXXX`) |

### Responses

#### 1. Success (Valid Key)
**Code**: `200 OK`
```json
{
  "success": true,
  "valid": true,
  "data": {
    "key": "ABCD-1234-EFGH-5678",
    "product_name": "Monthly Pro License",
    "expires_at": "2026-02-19T13:00:00.000Z",
    "status": "active",
    "created_at": "2026-01-19T13:00:00.000Z"
  }
}
```

#### 2. Success (Invalid/Expired/Revoked)
**Code**: `200 OK` or `404 Not Found`
```json
{
  "success": true,
  "valid": false,
  "status": "expired",
  "error": "License has expired"
}
```

## Client Implementation (TypeScript Example)

```typescript
async function checkLicense(key: string) {
    try {
        const response = await fetch(`https://your-domain.com/api/v1/licenses/verify?key=${key}`);
        const result = await response.json();

        if (result.success && result.valid) {
            console.log("License is valid until:", result.data.expires_at);
            return true;
        } else {
            console.error("License error:", result.error);
            return false;
        }
    } catch (error) {
        console.error("Network error checking license");
        return false;
    }
}
```

## Database Schema Highlights

- **`license_keys`**: Stores the actual keys and their metadata.
- **`status`**: Can be `active`, `revoked`, or `expired`.
- **`expires_at`**: Null for lifetime licenses, otherwise indicates the expiration timestamp.
